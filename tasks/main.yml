---

# - name: install docker
#   apt_key:
#     url: "https://download.docker.com/linux/ubuntu/gpg"
#     state: present

- name: install docker
  command: apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D
  become: yes 
  become_method: "sudo"

- name: add deb repo
  file:
    path: /etc/apt/sources.list.d/docker.list
    state: touch
    mode: "u=rw,g=r,o=r"

- lineinfile: dest="/etc/apt/sources.list.d/docker.list" line="{{item}}"
  with_items:
    - "deb https://apt.dockerproject.org/repo ubuntu-trusty main"

- name: apt update
  apt: update_cache=yes

- name: install depend items
  apt: name={{item}} state=present update_cache=yes
  with_items:
    - libsystemd-journal0
  become: yes 
  become_method: "sudo"

- apt: name=docker-engine state=present 
  become: yes 
  become_method: "sudo"

- name: add user mod
  become: yes
  become_method: sudo
  command: usermod -aG docker {{ unix_user }}